# CMIP6 VP & Evap Calibration - Complete Output List

## Overview
This document lists all outputs produced by the `CMPI6_VP_Evap_Calibration.ipynb` notebook.

**Configuration Example:**
- Model: `ACCESS_CM2`
- Scenarios: `["ssp245", "ssp585"]`
- Coordinates: `[(-31.75, 117.60)]`

---

## Output Directory Structure

```
<OUTPUT_DIR>/
├── Calibrated .met Files (Step 6)
├── Calibration Reports (Step 7)
└── diagnostics/
    └── <MODEL>/
        └── <LAT>_<LON>/
            ├── CSV Files (Baseline Statistics)
            └── PNG Files (Diagnostic Plots)
```

---

## 1. Calibrated .met Files

**Location:** `<OUTPUT_DIR>/`

**Naming Pattern:** `<MODEL>_<SCENARIO>_<LAT>_<LON>_calibrated.met`

**Examples:**
- `ACCESS_CM2_ssp245_neg31.75_117.60_calibrated.met`
- `ACCESS_CM2_ssp585_neg31.75_117.60_calibrated.met`

**Content:**
- All original columns from CMIP6 future .met file
- `vp` column replaced with calibrated VP values (hPa)
- `evap` column replaced with calibrated Evap values (mm/day)
- Metadata (tav, amp) recalculated
- Header structure matches template file exactly

**Generated by:** Step 6 (Write calibrated .met file)

---

## 2. Calibration Reports (Markdown)

**Location:** `<OUTPUT_DIR>/`

**Naming Pattern:** `calibration_report_<MODEL>_<LAT>_<LON>.md`

**Example:**
- `calibration_report_ACCESS_CM2_-31.75_117.60.md`

**Content:**
- Model, coordinates, baseline period information
- VP calibration statistics (monthly mean/std comparison)
- Evap calibration statistics (monthly mean/std comparison)
- Summary statistics (min, mean, max) for all series
- Warnings and validation results

**Generated by:** Step 7 (Generate diagnostics and report)

**Note:** One report per coordinate (not per scenario), summarizing calibration for both VP and Evap.

---

## 3. Diagnostic CSV Files (Baseline Statistics)

**Location:** `<OUTPUT_DIR>/diagnostics/<MODEL>/<LAT>_<LON>/`

**Files Generated (per variable: vp and evap):**

### A1) Monthly Statistics Table
**Filename:** `<MODEL>_<LAT>_<LON>_baseline_monthly_stats_<vp|evap>.csv`

**Content:**
- Columns: `month`, `dataset`, `mean`, `std`, `n`
- Rows: 36 rows (12 months × 3 datasets: SILO, CMIP6_obs_raw, CMIP6_obs_corrected)
- Shows monthly mean, standard deviation, and count for each dataset

**Example:**
- `ACCESS_CM2_-31.75_117.60_baseline_monthly_stats_vp.csv`
- `ACCESS_CM2_-31.75_117.60_baseline_monthly_stats_evap.csv`

**Generated by:** Step 8 - Diagnostic Validation (A1)

---

## 4. Diagnostic PNG Files (Plots)

**Location:** `<OUTPUT_DIR>/diagnostics/<MODEL>/<LAT>_<LON>/`

### A) Baseline Validation Plots (1986-2014)

#### A2) Monthly Climatology (Mean)
**Filename:** `<MODEL>_<LAT>_<LON>_baseline_monthly_mean_<vp|evap>.png`

**Content:**
- X-axis: Month (1-12)
- Y-axis: Mean value
- Three lines: SILO, CMIP6 obs raw, CMIP6 obs corrected
- Shows how well corrected data matches SILO monthly means

**Examples:**
- `ACCESS_CM2_-31.75_117.60_baseline_monthly_mean_vp.png`
- `ACCESS_CM2_-31.75_117.60_baseline_monthly_mean_evap.png`

#### A2) Monthly Climatology (Standard Deviation)
**Filename:** `<MODEL>_<LAT>_<LON>_baseline_monthly_std_<vp|evap>.png`

**Content:**
- X-axis: Month (1-12)
- Y-axis: Standard deviation
- Three lines: SILO, CMIP6 obs raw, CMIP6 obs corrected
- Shows how well corrected data matches SILO monthly variance

**Examples:**
- `ACCESS_CM2_-31.75_117.60_baseline_monthly_std_vp.png`
- `ACCESS_CM2_-31.75_117.60_baseline_monthly_std_evap.png`

#### A3) Daily Time-Series Overlay
**Filename:** `<MODEL>_<LAT>_<LON>_baseline_daily_overlay_<YEAR>_<vp|evap>.png`

**Content:**
- X-axis: Date (daily, for one representative year, e.g., 2005)
- Y-axis: Value
- Three lines: SILO, CMIP6 obs raw, CMIP6 obs corrected
- Shows daily agreement between datasets

**Examples:**
- `ACCESS_CM2_-31.75_117.60_baseline_daily_overlay_2005_vp.png`
- `ACCESS_CM2_-31.75_117.60_baseline_daily_overlay_2005_evap.png`

#### A4) Distribution Check
**Filename:** `<MODEL>_<LAT>_<LON>_baseline_distribution_<vp|evap>.png`

**Content:**
- Histogram/density plot
- Three distributions: SILO, CMIP6 obs raw, CMIP6 obs corrected
- Shows overall distribution match after calibration

**Examples:**
- `ACCESS_CM2_-31.75_117.60_baseline_distribution_vp.png`
- `ACCESS_CM2_-31.75_117.60_baseline_distribution_evap.png`

### B) Future Scenario Validation Plots

#### B1) Trend Sanity Check
**Filename:** `<MODEL>_<LAT>_<LON>_<SCENARIO>_trend_raw_vs_corrected_<vp|evap>.png`

**Content:**
- X-axis: Year (annual means)
- Y-axis: Annual mean value
- Two lines: Raw vs Corrected for the scenario
- Ensures calibration preserves trends

**Examples:**
- `ACCESS_CM2_-31.75_117.60_ssp245_trend_raw_vs_corrected_vp.png`
- `ACCESS_CM2_-31.75_117.60_ssp245_trend_raw_vs_corrected_evap.png`
- `ACCESS_CM2_-31.75_117.60_ssp585_trend_raw_vs_corrected_vp.png`
- `ACCESS_CM2_-31.75_117.60_ssp585_trend_raw_vs_corrected_evap.png`

#### B3) Variance Preservation Check
**Filename:** `<MODEL>_<LAT>_<LON>_<SCENARIO>_rolling_std_raw_vs_corrected_<vp|evap>.png`

**Content:**
- X-axis: Date (daily)
- Y-axis: Rolling 30-day standard deviation
- Two lines: Raw vs Corrected
- Ensures calibration doesn't collapse or explode variability

**Examples:**
- `ACCESS_CM2_-31.75_117.60_ssp245_rolling_std_raw_vs_corrected_vp.png`
- `ACCESS_CM2_-31.75_117.60_ssp245_rolling_std_raw_vs_corrected_evap.png`
- `ACCESS_CM2_-31.75_117.60_ssp585_rolling_std_raw_vs_corrected_vp.png`
- `ACCESS_CM2_-31.75_117.60_ssp585_rolling_std_raw_vs_corrected_evap.png`

**Generated by:** Step 8 - Diagnostic Validation (B1, B3)

---

## Complete Output Count Summary

### For Configuration: 1 Model, 2 Scenarios, 1 Coordinate

**Calibrated .met Files:** 2 files
- 1 for SSP245
- 1 for SSP585

**Calibration Reports:** 1 file
- 1 markdown report (per coordinate, not per scenario)

**Diagnostic CSV Files:** 2 files
- 1 for VP baseline monthly stats
- 1 for Evap baseline monthly stats

**Diagnostic PNG Files:** 12 files
- **Baseline (4 files):**
  - 2 monthly mean plots (VP, Evap)
  - 2 monthly std plots (VP, Evap)
  - 2 daily overlay plots (VP, Evap)
  - 2 distribution plots (VP, Evap)
- **Future Scenarios (8 files):**
  - 4 trend check plots (2 scenarios × 2 variables)
  - 4 variance preservation plots (2 scenarios × 2 variables)

**Total Outputs:** 17 files per coordinate

---

## Output File Naming Conventions

### Coordinate Format
- Latitude: Uses "neg" prefix for negative values (e.g., `neg31.75` instead of `-31.75`)
- Longitude: Standard format (e.g., `117.60`)

### Scenario Format
- Lowercase in configuration: `["ssp245", "ssp585"]`
- Files may use uppercase: `SSP245`, `SSP585` (handled automatically)

### Model Format
- Must use underscores: `ACCESS_CM2` (not `ACCESS-CM2`)

---

## File Locations Summary

```
<OUTPUT_DIR>/
│
├── ACCESS_CM2_ssp245_neg31.75_117.60_calibrated.met
├── ACCESS_CM2_ssp585_neg31.75_117.60_calibrated.met
├── calibration_report_ACCESS_CM2_-31.75_117.60.md
│
└── diagnostics/
    └── ACCESS_CM2/
        └── -31.75_117.60/
            ├── ACCESS_CM2_-31.75_117.60_baseline_monthly_stats_vp.csv
            ├── ACCESS_CM2_-31.75_117.60_baseline_monthly_stats_evap.csv
            ├── ACCESS_CM2_-31.75_117.60_baseline_monthly_mean_vp.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_monthly_mean_evap.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_monthly_std_vp.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_monthly_std_evap.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_daily_overlay_2005_vp.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_daily_overlay_2005_evap.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_distribution_vp.png
            ├── ACCESS_CM2_-31.75_117.60_baseline_distribution_evap.png
            ├── ACCESS_CM2_-31.75_117.60_ssp245_trend_raw_vs_corrected_vp.png
            ├── ACCESS_CM2_-31.75_117.60_ssp245_trend_raw_vs_corrected_evap.png
            ├── ACCESS_CM2_-31.75_117.60_ssp245_rolling_std_raw_vs_corrected_vp.png
            ├── ACCESS_CM2_-31.75_117.60_ssp245_rolling_std_raw_vs_corrected_evap.png
            ├── ACCESS_CM2_-31.75_117.60_ssp585_trend_raw_vs_corrected_vp.png
            ├── ACCESS_CM2_-31.75_117.60_ssp585_trend_raw_vs_corrected_evap.png
            ├── ACCESS_CM2_-31.75_117.60_ssp585_rolling_std_raw_vs_corrected_vp.png
            └── ACCESS_CM2_-31.75_117.60_ssp585_rolling_std_raw_vs_corrected_evap.png
```

---

## Notes

1. **Multiple Coordinates:** If processing multiple coordinates, each coordinate gets its own set of outputs in separate subdirectories under `diagnostics/<MODEL>/`.

2. **Multiple Models:** If processing multiple models, each model gets its own subdirectory under `diagnostics/`.

3. **Scenario Separation Plot:** Currently not implemented (requires both SSP245 and SSP585 data to be available simultaneously). Can be added if needed.

4. **Physical Bounds Validation:** Results are printed to console but not saved to files (validation errors stop processing).

5. **All outputs are overwritten** if they already exist (no versioning).


